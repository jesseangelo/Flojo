{"id":"BK/5","dependencies":[{"name":"/mnt/c/Users/Gamer/Development/Flojo/.babelrc","includedInParent":true,"mtime":1548821389384},{"name":"/mnt/c/Users/Gamer/Development/Flojo/package.json","includedInParent":true,"mtime":1551923390414},{"name":"./types.js","loc":{"line":1,"column":56},"parent":"/mnt/c/Users/Gamer/Development/Flojo/src/core.js","resolved":"/mnt/c/Users/Gamer/Development/Flojo/src/types.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.core=void 0;var t=require(\"./types.js\");function e(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var s=function(){function n(){e(this,n),this.tasks=[],this.currentTaskId=0,this.isRunning=!1,this.intervalID=null}return i(n,[{key:\"init\",value:function(){var t=this;null===this.intervalID&&(this.intervalID=window.requestAnimationFrame(function(){t.update()}),this.isRunning=!0)}},{key:\"add\",value:function(t){this.tasks.push(t)}},{key:\"remove\",value:function(t){var e=this;if(0===this.tasks.length)return!1;this.tasks.forEach(function(n,i){if(null!=n&&n.id===t)return e.tasks[i]=null,e.cleanList(),e._debug&&console.log(\"task killed: \"+t),!0})}},{key:\"update\",value:function(){var t=this;this.findTime(),this.cleanList(),this.tasks.length?window.requestAnimationFrame(function(){t.update()}):(this.intervalID=null,this.currentTaskId=0,this.isRunning=!1)}},{key:\"getNewWhen\",value:function(t){return(new Date).getTime()+t}},{key:\"getNewTaskId\",value:function(){return this.init(),this.currentTaskId++}},{key:\"getTaskFromId\",value:function(t){return this.tasks.find(function(e){if(null!=e)return e.id===t})}},{key:\"findTime\",value:function(){var e=this;this.tasks.forEach(function(n,i){if(null!==n&&n.when-(new Date).getTime()<0)switch(n.func(n.param),n.type){case t.TYPE_TIMED:e.tasks[i]=null;break;case t.TYPE_COUNTED:n.count--,n.count>0?n.when=e.getNewWhen(n.interval):e.tasks[i]=null;break;case t.TYPE_INFINITE:n.when=e.getNewWhen(n.interval)}})}},{key:\"cleanList\",value:function(){for(var t=[],e=0;e<this.tasks.length;e++)null!=this.tasks[e]&&t.push(this.tasks[e]);this.tasks=t}}]),n}();exports.core=s;","map":{"mappings":[{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":0}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":13}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":20}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":35}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":43}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":56}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":57}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":64}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":68}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":76}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":86}},{"source":"core.js","original":{"line":1,"column":0},"generated":{"line":1,"column":88}},{"source":"core.js","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"core.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"core.js","original":{"line":1,"column":0},"generated":{"line":1,"column":102}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":116}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":125}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":127}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":129}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":132}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":137}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":150}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":153}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":159}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":163}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":173}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":210}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":219}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":221}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":223}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":226}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":230}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":234}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":236}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":238}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":240}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":242}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":249}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":253}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":254}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":258}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":260}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":262}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":265}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":267}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":278}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":280}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":293}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":295}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":297}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":311}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":313}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":323}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":327}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":329}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":339}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":342}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":349}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":364}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":366}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":368}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":372}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":376}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":385}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":387}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":389}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":391}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":394}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":401}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":404}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":406}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":408}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":418}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":421}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":424}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":426}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":428}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":431}},{"source":"core.js","name":"core","original":{"line":3,"column":13},"generated":{"line":1,"column":433}},{"source":"core.js","name":"core","original":{"line":3,"column":13},"generated":{"line":1,"column":437}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":439}},{"source":"core.js","original":{"line":4,"column":16},"generated":{"line":1,"column":450}},{"source":"core.js","original":{"line":4,"column":16},"generated":{"line":1,"column":459}},{"source":"core.js","original":{"line":4,"column":16},"generated":{"line":1,"column":463}},{"source":"core.js","original":{"line":4,"column":16},"generated":{"line":1,"column":465}},{"source":"core.js","original":{"line":4,"column":16},"generated":{"line":1,"column":470}},{"source":"core.js","name":"tasks","original":{"line":5,"column":9},"generated":{"line":1,"column":473}},{"source":"core.js","name":"tasks","original":{"line":5,"column":9},"generated":{"line":1,"column":478}},{"source":"core.js","original":{"line":5,"column":17},"generated":{"line":1,"column":484}},{"source":"core.js","name":"currentTaskId","original":{"line":6,"column":9},"generated":{"line":1,"column":487}},{"source":"core.js","name":"currentTaskId","original":{"line":6,"column":9},"generated":{"line":1,"column":492}},{"source":"core.js","original":{"line":6,"column":25},"generated":{"line":1,"column":506}},{"source":"core.js","name":"isRunning","original":{"line":9,"column":9},"generated":{"line":1,"column":508}},{"source":"core.js","name":"isRunning","original":{"line":9,"column":9},"generated":{"line":1,"column":513}},{"source":"core.js","original":{"line":9,"column":21},"generated":{"line":1,"column":524}},{"source":"core.js","name":"intervalID","original":{"line":10,"column":9},"generated":{"line":1,"column":526}},{"source":"core.js","name":"intervalID","original":{"line":10,"column":9},"generated":{"line":1,"column":531}},{"source":"core.js","original":{"line":10,"column":22},"generated":{"line":1,"column":542}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":547}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":554}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":556}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":558}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":559}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":560}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":564}},{"source":"core.js","original":{"line":13,"column":9},"generated":{"line":1,"column":571}},{"source":"core.js","original":{"line":13,"column":9},"generated":{"line":1,"column":577}},{"source":"core.js","original":{"line":13,"column":9},"generated":{"line":1,"column":588}},{"source":"core.js","original":{"line":13,"column":9},"generated":{"line":1,"column":592}},{"source":"core.js","original":{"line":13,"column":9},"generated":{"line":1,"column":594}},{"source":"core.js","original":{"line":14,"column":28},"generated":{"line":1,"column":599}},{"source":"core.js","original":{"line":14,"column":8},"generated":{"line":1,"column":606}},{"source":"core.js","name":"intervalID","original":{"line":14,"column":13},"generated":{"line":1,"column":611}},{"source":"core.js","name":"intervalID","original":{"line":15,"column":11},"generated":{"line":1,"column":624}},{"source":"core.js","name":"intervalID","original":{"line":15,"column":11},"generated":{"line":1,"column":629}},{"source":"core.js","name":"window","original":{"line":15,"column":24},"generated":{"line":1,"column":640}},{"source":"core.js","name":"requestAnimationFrame","original":{"line":15,"column":31},"generated":{"line":1,"column":647}},{"source":"core.js","original":{"line":15,"column":53},"generated":{"line":1,"column":669}},{"source":"core.js","original":{"line":16,"column":8},"generated":{"line":1,"column":680}},{"source":"core.js","name":"update","original":{"line":16,"column":13},"generated":{"line":1,"column":682}},{"source":"core.js","name":"isRunning","original":{"line":18,"column":11},"generated":{"line":1,"column":693}},{"source":"core.js","name":"isRunning","original":{"line":18,"column":11},"generated":{"line":1,"column":698}},{"source":"core.js","original":{"line":18,"column":23},"generated":{"line":1,"column":709}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":714}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":715}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":719}},{"source":"core.js","name":"task","original":{"line":22,"column":6},"generated":{"line":1,"column":725}},{"source":"core.js","name":"task","original":{"line":22,"column":6},"generated":{"line":1,"column":731}},{"source":"core.js","name":"task","original":{"line":22,"column":6},"generated":{"line":1,"column":740}},{"source":"core.js","name":"tasks","original":{"line":23,"column":9},"generated":{"line":1,"column":743}},{"source":"core.js","name":"tasks","original":{"line":23,"column":9},"generated":{"line":1,"column":748}},{"source":"core.js","name":"push","original":{"line":23,"column":15},"generated":{"line":1,"column":754}},{"source":"core.js","name":"task","original":{"line":23,"column":20},"generated":{"line":1,"column":759}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":764}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":765}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":769}},{"source":"core.js","name":"taskId","original":{"line":26,"column":9},"generated":{"line":1,"column":778}},{"source":"core.js","name":"taskId","original":{"line":26,"column":9},"generated":{"line":1,"column":784}},{"source":"core.js","name":"taskId","original":{"line":26,"column":9},"generated":{"line":1,"column":793}},{"source":"core.js","original":{"line":26,"column":17},"generated":{"line":1,"column":796}},{"source":"core.js","original":{"line":26,"column":17},"generated":{"line":1,"column":800}},{"source":"core.js","original":{"line":26,"column":17},"generated":{"line":1,"column":802}},{"source":"core.js","original":{"line":27,"column":8},"generated":{"line":1,"column":807}},{"source":"core.js","original":{"line":27,"column":30},"generated":{"line":1,"column":810}},{"source":"core.js","original":{"line":27,"column":8},"generated":{"line":1,"column":814}},{"source":"core.js","name":"tasks","original":{"line":27,"column":13},"generated":{"line":1,"column":819}},{"source":"core.js","name":"length","original":{"line":27,"column":19},"generated":{"line":1,"column":825}},{"source":"core.js","original":{"line":28,"column":13},"generated":{"line":1,"column":832}},{"source":"core.js","original":{"line":28,"column":13},"generated":{"line":1,"column":839}},{"source":"core.js","name":"tasks","original":{"line":31,"column":9},"generated":{"line":1,"column":841}},{"source":"core.js","name":"tasks","original":{"line":31,"column":9},"generated":{"line":1,"column":846}},{"source":"core.js","name":"forEach","original":{"line":31,"column":15},"generated":{"line":1,"column":852}},{"source":"core.js","original":{"line":31,"column":23},"generated":{"line":1,"column":860}},{"source":"core.js","name":"task","original":{"line":31,"column":24},"generated":{"line":1,"column":869}},{"source":"core.js","name":"index","original":{"line":31,"column":30},"generated":{"line":1,"column":871}},{"source":"core.js","name":"task","original":{"line":32,"column":10},"generated":{"line":1,"column":874}},{"source":"core.js","original":{"line":32,"column":18},"generated":{"line":1,"column":877}},{"source":"core.js","name":"task","original":{"line":32,"column":10},"generated":{"line":1,"column":883}},{"source":"core.js","name":"task","original":{"line":33,"column":12},"generated":{"line":1,"column":886}},{"source":"core.js","name":"id","original":{"line":33,"column":17},"generated":{"line":1,"column":888}},{"source":"core.js","name":"taskId","original":{"line":33,"column":24},"generated":{"line":1,"column":893}},{"source":"core.js","original":{"line":39,"column":17},"generated":{"line":1,"column":895}},{"source":"core.js","original":{"line":34,"column":10},"generated":{"line":1,"column":902}},{"source":"core.js","name":"tasks","original":{"line":34,"column":15},"generated":{"line":1,"column":904}},{"source":"core.js","name":"index","original":{"line":34,"column":21},"generated":{"line":1,"column":910}},{"source":"core.js","original":{"line":34,"column":30},"generated":{"line":1,"column":913}},{"source":"core.js","original":{"line":35,"column":10},"generated":{"line":1,"column":918}},{"source":"core.js","name":"cleanList","original":{"line":35,"column":15},"generated":{"line":1,"column":920}},{"source":"core.js","original":{"line":36,"column":14},"generated":{"line":1,"column":932}},{"source":"core.js","name":"_debug","original":{"line":36,"column":19},"generated":{"line":1,"column":934}},{"source":"core.js","name":"console","original":{"line":37,"column":12},"generated":{"line":1,"column":942}},{"source":"core.js","name":"log","original":{"line":37,"column":20},"generated":{"line":1,"column":950}},{"source":"core.js","original":{"line":37,"column":24},"generated":{"line":1,"column":954}},{"source":"core.js","name":"taskId","original":{"line":37,"column":42},"generated":{"line":1,"column":970}},{"source":"core.js","original":{"line":39,"column":17},"generated":{"line":1,"column":974}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":980}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":981}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":985}},{"source":"core.js","original":{"line":50,"column":11},"generated":{"line":1,"column":994}},{"source":"core.js","original":{"line":50,"column":11},"generated":{"line":1,"column":1000}},{"source":"core.js","original":{"line":50,"column":11},"generated":{"line":1,"column":1011}},{"source":"core.js","original":{"line":50,"column":11},"generated":{"line":1,"column":1015}},{"source":"core.js","original":{"line":50,"column":11},"generated":{"line":1,"column":1017}},{"source":"core.js","name":"findTime","original":{"line":51,"column":9},"generated":{"line":1,"column":1022}},{"source":"core.js","name":"findTime","original":{"line":51,"column":9},"generated":{"line":1,"column":1027}},{"source":"core.js","name":"cleanList","original":{"line":53,"column":9},"generated":{"line":1,"column":1038}},{"source":"core.js","name":"cleanList","original":{"line":53,"column":9},"generated":{"line":1,"column":1043}},{"source":"core.js","original":{"line":54,"column":8},"generated":{"line":1,"column":1055}},{"source":"core.js","name":"tasks","original":{"line":54,"column":13},"generated":{"line":1,"column":1060}},{"source":"core.js","name":"length","original":{"line":54,"column":19},"generated":{"line":1,"column":1066}},{"source":"core.js","name":"window","original":{"line":55,"column":6},"generated":{"line":1,"column":1073}},{"source":"core.js","name":"requestAnimationFrame","original":{"line":55,"column":13},"generated":{"line":1,"column":1080}},{"source":"core.js","original":{"line":55,"column":35},"generated":{"line":1,"column":1102}},{"source":"core.js","original":{"line":56,"column":8},"generated":{"line":1,"column":1113}},{"source":"core.js","name":"update","original":{"line":56,"column":13},"generated":{"line":1,"column":1115}},{"source":"core.js","name":"intervalID","original":{"line":59,"column":11},"generated":{"line":1,"column":1127}},{"source":"core.js","name":"intervalID","original":{"line":59,"column":11},"generated":{"line":1,"column":1132}},{"source":"core.js","original":{"line":59,"column":24},"generated":{"line":1,"column":1143}},{"source":"core.js","name":"currentTaskId","original":{"line":60,"column":11},"generated":{"line":1,"column":1148}},{"source":"core.js","name":"currentTaskId","original":{"line":60,"column":11},"generated":{"line":1,"column":1153}},{"source":"core.js","original":{"line":60,"column":27},"generated":{"line":1,"column":1167}},{"source":"core.js","name":"isRunning","original":{"line":61,"column":11},"generated":{"line":1,"column":1169}},{"source":"core.js","name":"isRunning","original":{"line":61,"column":11},"generated":{"line":1,"column":1174}},{"source":"core.js","original":{"line":61,"column":23},"generated":{"line":1,"column":1185}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1190}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1191}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1195}},{"source":"core.js","name":"interval","original":{"line":65,"column":13},"generated":{"line":1,"column":1208}},{"source":"core.js","name":"interval","original":{"line":65,"column":13},"generated":{"line":1,"column":1214}},{"source":"core.js","name":"interval","original":{"line":65,"column":13},"generated":{"line":1,"column":1223}},{"source":"core.js","original":{"line":67,"column":11},"generated":{"line":1,"column":1226}},{"source":"core.js","original":{"line":67,"column":11},"generated":{"line":1,"column":1233}},{"source":"core.js","name":"Date","original":{"line":67,"column":15},"generated":{"line":1,"column":1237}},{"source":"core.js","name":"getTime","original":{"line":67,"column":22},"generated":{"line":1,"column":1243}},{"source":"core.js","name":"interval","original":{"line":67,"column":34},"generated":{"line":1,"column":1253}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1257}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1258}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1262}},{"source":"core.js","original":{"line":70,"column":17},"generated":{"line":1,"column":1277}},{"source":"core.js","original":{"line":70,"column":17},"generated":{"line":1,"column":1283}},{"source":"core.js","original":{"line":72,"column":11},"generated":{"line":1,"column":1294}},{"source":"core.js","name":"init","original":{"line":71,"column":9},"generated":{"line":1,"column":1301}},{"source":"core.js","name":"init","original":{"line":71,"column":9},"generated":{"line":1,"column":1306}},{"source":"core.js","original":{"line":72,"column":11},"generated":{"line":1,"column":1313}},{"source":"core.js","name":"currentTaskId","original":{"line":72,"column":16},"generated":{"line":1,"column":1318}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1336}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1337}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1341}},{"source":"core.js","name":"id","original":{"line":75,"column":16},"generated":{"line":1,"column":1357}},{"source":"core.js","name":"id","original":{"line":75,"column":16},"generated":{"line":1,"column":1363}},{"source":"core.js","name":"id","original":{"line":75,"column":16},"generated":{"line":1,"column":1372}},{"source":"core.js","original":{"line":76,"column":11},"generated":{"line":1,"column":1375}},{"source":"core.js","original":{"line":76,"column":11},"generated":{"line":1,"column":1382}},{"source":"core.js","name":"tasks","original":{"line":76,"column":16},"generated":{"line":1,"column":1387}},{"source":"core.js","name":"find","original":{"line":76,"column":22},"generated":{"line":1,"column":1393}},{"source":"core.js","original":{"line":76,"column":27},"generated":{"line":1,"column":1398}},{"source":"core.js","name":"t","original":{"line":76,"column":36},"generated":{"line":1,"column":1407}},{"source":"core.js","name":"t","original":{"line":77,"column":10},"generated":{"line":1,"column":1410}},{"source":"core.js","original":{"line":77,"column":15},"generated":{"line":1,"column":1413}},{"source":"core.js","name":"t","original":{"line":77,"column":10},"generated":{"line":1,"column":1419}},{"source":"core.js","name":"t","original":{"line":78,"column":15},"generated":{"line":1,"column":1421}},{"source":"core.js","name":"t","original":{"line":78,"column":15},"generated":{"line":1,"column":1428}},{"source":"core.js","name":"id","original":{"line":78,"column":17},"generated":{"line":1,"column":1430}},{"source":"core.js","name":"id","original":{"line":78,"column":24},"generated":{"line":1,"column":1435}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1441}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1442}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1446}},{"source":"core.js","original":{"line":83,"column":13},"generated":{"line":1,"column":1457}},{"source":"core.js","original":{"line":83,"column":13},"generated":{"line":1,"column":1463}},{"source":"core.js","original":{"line":83,"column":13},"generated":{"line":1,"column":1474}},{"source":"core.js","original":{"line":83,"column":13},"generated":{"line":1,"column":1478}},{"source":"core.js","original":{"line":83,"column":13},"generated":{"line":1,"column":1480}},{"source":"core.js","name":"tasks","original":{"line":84,"column":9},"generated":{"line":1,"column":1485}},{"source":"core.js","name":"tasks","original":{"line":84,"column":9},"generated":{"line":1,"column":1490}},{"source":"core.js","name":"forEach","original":{"line":84,"column":15},"generated":{"line":1,"column":1496}},{"source":"core.js","original":{"line":84,"column":23},"generated":{"line":1,"column":1504}},{"source":"core.js","name":"task","original":{"line":84,"column":24},"generated":{"line":1,"column":1513}},{"source":"core.js","name":"index","original":{"line":84,"column":30},"generated":{"line":1,"column":1515}},{"source":"core.js","name":"task","original":{"line":85,"column":10},"generated":{"line":1,"column":1518}},{"source":"core.js","original":{"line":85,"column":19},"generated":{"line":1,"column":1521}},{"source":"core.js","name":"task","original":{"line":85,"column":10},"generated":{"line":1,"column":1528}},{"source":"core.js","name":"task","original":{"line":89,"column":10},"generated":{"line":1,"column":1531}},{"source":"core.js","name":"when","original":{"line":89,"column":15},"generated":{"line":1,"column":1533}},{"source":"core.js","original":{"line":89,"column":22},"generated":{"line":1,"column":1539}},{"source":"core.js","name":"Date","original":{"line":89,"column":26},"generated":{"line":1,"column":1543}},{"source":"core.js","name":"getTime","original":{"line":89,"column":33},"generated":{"line":1,"column":1549}},{"source":"core.js","original":{"line":89,"column":45},"generated":{"line":1,"column":1559}},{"source":"core.js","name":"task","original":{"line":92,"column":16},"generated":{"line":1,"column":1561}},{"source":"core.js","name":"task","original":{"line":90,"column":8},"generated":{"line":1,"column":1568}},{"source":"core.js","name":"func","original":{"line":90,"column":13},"generated":{"line":1,"column":1570}},{"source":"core.js","name":"task","original":{"line":90,"column":18},"generated":{"line":1,"column":1575}},{"source":"core.js","name":"param","original":{"line":90,"column":23},"generated":{"line":1,"column":1577}},{"source":"core.js","name":"task","original":{"line":92,"column":16},"generated":{"line":1,"column":1584}},{"source":"core.js","name":"type","original":{"line":92,"column":21},"generated":{"line":1,"column":1586}},{"source":"core.js","name":"TYPE_TIMED","original":{"line":93,"column":15},"generated":{"line":1,"column":1592}},{"source":"core.js","name":"TYPE_TIMED","original":{"line":93,"column":15},"generated":{"line":1,"column":1597}},{"source":"core.js","original":{"line":93,"column":10},"generated":{"line":1,"column":1599}},{"source":"core.js","original":{"line":94,"column":12},"generated":{"line":1,"column":1610}},{"source":"core.js","name":"tasks","original":{"line":94,"column":17},"generated":{"line":1,"column":1612}},{"source":"core.js","name":"index","original":{"line":94,"column":23},"generated":{"line":1,"column":1618}},{"source":"core.js","original":{"line":94,"column":32},"generated":{"line":1,"column":1621}},{"source":"core.js","original":{"line":96,"column":12},"generated":{"line":1,"column":1626}},{"source":"core.js","name":"TYPE_COUNTED","original":{"line":98,"column":15},"generated":{"line":1,"column":1632}},{"source":"core.js","name":"TYPE_COUNTED","original":{"line":98,"column":15},"generated":{"line":1,"column":1637}},{"source":"core.js","original":{"line":98,"column":10},"generated":{"line":1,"column":1639}},{"source":"core.js","name":"task","original":{"line":99,"column":12},"generated":{"line":1,"column":1652}},{"source":"core.js","name":"count","original":{"line":99,"column":17},"generated":{"line":1,"column":1654}},{"source":"core.js","name":"task","original":{"line":100,"column":16},"generated":{"line":1,"column":1662}},{"source":"core.js","name":"count","original":{"line":100,"column":21},"generated":{"line":1,"column":1664}},{"source":"core.js","original":{"line":100,"column":29},"generated":{"line":1,"column":1670}},{"source":"core.js","name":"task","original":{"line":101,"column":14},"generated":{"line":1,"column":1672}},{"source":"core.js","name":"when","original":{"line":101,"column":19},"generated":{"line":1,"column":1674}},{"source":"core.js","original":{"line":101,"column":26},"generated":{"line":1,"column":1679}},{"source":"core.js","name":"getNewWhen","original":{"line":101,"column":31},"generated":{"line":1,"column":1681}},{"source":"core.js","name":"task","original":{"line":101,"column":42},"generated":{"line":1,"column":1692}},{"source":"core.js","name":"interval","original":{"line":101,"column":47},"generated":{"line":1,"column":1694}},{"source":"core.js","original":{"line":103,"column":14},"generated":{"line":1,"column":1704}},{"source":"core.js","name":"tasks","original":{"line":103,"column":19},"generated":{"line":1,"column":1706}},{"source":"core.js","name":"index","original":{"line":103,"column":25},"generated":{"line":1,"column":1712}},{"source":"core.js","original":{"line":103,"column":34},"generated":{"line":1,"column":1715}},{"source":"core.js","original":{"line":105,"column":12},"generated":{"line":1,"column":1720}},{"source":"core.js","name":"TYPE_INFINITE","original":{"line":107,"column":15},"generated":{"line":1,"column":1726}},{"source":"core.js","name":"TYPE_INFINITE","original":{"line":107,"column":15},"generated":{"line":1,"column":1731}},{"source":"core.js","original":{"line":107,"column":10},"generated":{"line":1,"column":1733}},{"source":"core.js","name":"task","original":{"line":108,"column":12},"generated":{"line":1,"column":1747}},{"source":"core.js","name":"when","original":{"line":108,"column":17},"generated":{"line":1,"column":1749}},{"source":"core.js","original":{"line":108,"column":24},"generated":{"line":1,"column":1754}},{"source":"core.js","name":"getNewWhen","original":{"line":108,"column":29},"generated":{"line":1,"column":1756}},{"source":"core.js","name":"task","original":{"line":108,"column":40},"generated":{"line":1,"column":1767}},{"source":"core.js","name":"interval","original":{"line":108,"column":45},"generated":{"line":1,"column":1769}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1784}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1785}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1789}},{"source":"core.js","original":{"line":118,"column":14},"generated":{"line":1,"column":1801}},{"source":"core.js","original":{"line":118,"column":14},"generated":{"line":1,"column":1807}},{"source":"core.js","original":{"line":120,"column":9},"generated":{"line":1,"column":1818}},{"source":"core.js","name":"newArray","original":{"line":119,"column":8},"generated":{"line":1,"column":1822}},{"source":"core.js","name":"newArray","original":{"line":119,"column":8},"generated":{"line":1,"column":1826}},{"source":"core.js","original":{"line":119,"column":19},"generated":{"line":1,"column":1828}},{"source":"core.js","name":"q","original":{"line":120,"column":13},"generated":{"line":1,"column":1831}},{"source":"core.js","original":{"line":120,"column":17},"generated":{"line":1,"column":1833}},{"source":"core.js","name":"q","original":{"line":120,"column":20},"generated":{"line":1,"column":1835}},{"source":"core.js","original":{"line":120,"column":24},"generated":{"line":1,"column":1837}},{"source":"core.js","name":"tasks","original":{"line":120,"column":29},"generated":{"line":1,"column":1842}},{"source":"core.js","name":"length","original":{"line":120,"column":35},"generated":{"line":1,"column":1848}},{"source":"core.js","name":"q","original":{"line":120,"column":43},"generated":{"line":1,"column":1855}},{"source":"core.js","original":{"line":121,"column":27},"generated":{"line":1,"column":1859}},{"source":"core.js","original":{"line":121,"column":10},"generated":{"line":1,"column":1865}},{"source":"core.js","name":"tasks","original":{"line":121,"column":15},"generated":{"line":1,"column":1870}},{"source":"core.js","name":"q","original":{"line":121,"column":21},"generated":{"line":1,"column":1876}},{"source":"core.js","name":"newArray","original":{"line":122,"column":8},"generated":{"line":1,"column":1880}},{"source":"core.js","name":"push","original":{"line":122,"column":17},"generated":{"line":1,"column":1882}},{"source":"core.js","original":{"line":122,"column":22},"generated":{"line":1,"column":1887}},{"source":"core.js","name":"tasks","original":{"line":122,"column":27},"generated":{"line":1,"column":1892}},{"source":"core.js","name":"q","original":{"line":122,"column":33},"generated":{"line":1,"column":1898}},{"source":"core.js","name":"tasks","original":{"line":125,"column":9},"generated":{"line":1,"column":1902}},{"source":"core.js","name":"tasks","original":{"line":125,"column":9},"generated":{"line":1,"column":1907}},{"source":"core.js","name":"newArray","original":{"line":125,"column":17},"generated":{"line":1,"column":1913}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1919}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1921}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1924}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1932}},{"source":"core.js","original":{"line":126,"column":3},"generated":{"line":1,"column":1937}}],"sources":{"core.js":"import { TYPE_COUNTED, TYPE_TIMED, TYPE_INFINITE } from './types.js';\n\nexport class core {\n  constructor() {\n    this.tasks = [];\n    this.currentTaskId = 0;\n\n    //tracking\n    this.isRunning = false;\n    this.intervalID = null;\n  }\n\n  init() {\n    if (this.intervalID === null) {\n      this.intervalID = window.requestAnimationFrame(() => {\n        this.update();\n      });\n      this.isRunning = true;\n    }\n  }\n\n  add(task) {\n    this.tasks.push(task);\n  }\n\n  remove(taskId) {\n    if (this.tasks.length === 0) {\n      return false;\n    }\n\n    this.tasks.forEach((task, index) => {\n      if (task != null) {\n        if (task.id === taskId) {\n          this.tasks[index] = null;\n          this.cleanList();\n          if (this._debug) {\n            console.log('task killed: ' + taskId);\n          }\n          return true;\n        }\n      }\n    });\n  }\n\n  // set currentTaskId(x) {\n  //   this.init();\n  //   return this.currentTaskId++;\n  // }\n\n  update() {\n    this.findTime();\n\n    this.cleanList();\n    if (this.tasks.length) {\n      window.requestAnimationFrame(() => {\n        this.update();\n      });\n    } else {\n      this.intervalID = null;\n      this.currentTaskId = 0;\n      this.isRunning = false;\n    }\n  }\n\n  getNewWhen(interval) {\n    // new DATE might be problematic depending on browser\n    return new Date().getTime() + interval;\n  }\n\n  getNewTaskId() {\n    this.init();\n    return this.currentTaskId++;\n  }\n\n  getTaskFromId(id) {\n    return this.tasks.find(function(t) {\n      if (t != null) {\n        return t.id === id;\n      }\n    });\n  }\n\n  findTime() {\n    this.tasks.forEach((task, index) => {\n      if (task === null) {\n        return;\n      }\n\n      if (task.when - new Date().getTime() < 0) {\n        task.func(task.param);\n\n        switch (task.type) {\n          case TYPE_TIMED: //timed\n            this.tasks[index] = null;\n            //console.log(this.core.tasks[index]);\n            break;\n\n          case TYPE_COUNTED: //count\n            task.count--;\n            if (task.count > 0) {\n              task.when = this.getNewWhen(task.interval);\n            } else {\n              this.tasks[index] = null;\n            }\n            break;\n\n          case TYPE_INFINITE: //infinite\n            task.when = this.getNewWhen(task.interval);\n            break;\n\n          default:\n            break;\n        }\n      }\n    });\n  }\n\n  cleanList() {\n    var newArray = [];\n    for (var q = 0; q < this.tasks.length; q++) {\n      if (this.tasks[q] != null) {\n        newArray.push(this.tasks[q]);\n      }\n    }\n    this.tasks = newArray;\n  }\n}\n"},"lineCount":null}},"hash":"91f437b2bcff24f1cafd08f518421e3d","cacheData":{"env":{}}}