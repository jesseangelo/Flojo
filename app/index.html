<!doctype html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Perezoso</title>

    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <!-- Place favicon.ico in the root directory -->

    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- endbuild --> 

    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
    <style>
      #box {
        height: 5em;
        width: 5em;
        border: 2px solid;
        transition: all .4s ease;
      }
      .example {
        width: 20em;
        height: 2em;
        border: 2px solid;
        margin-bottom: 2em;
        padding: 1em;
      }
      .test_good { background-color: green; }
      .test_bad { background-color: red; }
    </style>
  </head>
  <body>
    <h1>PEREZOSO</h1>
    <br>

    Timed
    <section class='example timed'>

    </section>

    After
    <section class='example after'>

    </section>

    Infinite
    <section class='example infinite'>

    </section>

    Counted
    <section class='example counted'>

    </section>

    Remove
    <section class='example remove'>

    </section>

    Wait For
    <section class='example waitfor'>

    </section>

    <div id="box"></div>

    <!-- build:js scripts/vendor.js -->
    <!-- bower:js -->
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:js scripts/main.js -->
    <script src="scripts/lib/Perezoso.js"></script>
    <script src="scripts/main.js"></script>
    <!-- endbuild -->
    <script>
 
    P('.timed').addClass('test_bad');
    P('.counted').addClass('test_bad');
    P('.after').addClass('test_bad');
    P('.infinite').addClass('test_bad');

    var el = document.querySelector('.timed')
      el.innerHTML = '2000ms';

    PEREZOSO.timed(2000, function() {
      P('.timed').removeClass('test_bad')
      P('.timed').addClass('test_good');

    });


    var testAfter = PEREZOSO.timed(1000, function() {
      var el = document.querySelector('.after')
      el.innerHTML = 'first test done, waiting..';
    });
    console.log("id is: " + testAfter)
    PEREZOSO.after(testAfter, 5000, function() {
      P('.after').removeClass('test_bad');
      P('.after').addClass('test_good');
      var el = document.querySelector('.after')
      el.innerHTML = '';
    });

    var infCt = 0;
    PEREZOSO.infinite(1000, function() {
      P('.infinite').removeClass('test_bad');
      P('.infinite').addClass('test_good');
      var el = document.querySelector('.infinite')
      el.innerHTML = 'infinite: ' + infCt++;
    });

    var counted = 0;
    PEREZOSO.counted(1000, 5, function() {
      P('.counted').removeClass('test_bad');
      P('.counted').addClass('test_good');
      var el = document.querySelector('.counted')
      el.innerHTML = '5 : ' + ++counted;
    });


    var remo = PEREZOSO.timed(2000, function() {
      P('.remove').addClass('test_good');
      var el = document.querySelector('.remove')
      el.innerHTML = 'Red if remove fails'
    });

    //console.log("id is: " + k3)
    var removeMe = PEREZOSO.after(remo, 1000, function() {
      P('.counted').addClass('test_bad');
    });

    PEREZOSO.remove(removeMe);

   
    //
    // var seq = P.sequence();
    // seq.step().step().step()

    //Wait FOR
    // var n = {
    //   val: 1
    // };
    // P.waitFor(n, "val", 2)
    // n.val = 2;

    //P.waitFor("n == 2").then(function(){
    //  P('.waitfor').addClass('test_good')
    //})
    
    //Box animation
    PEREZOSO.infinite(1500, function() {
      var h = Math.floor(Math.random() * 12) + 10;
      var w = Math.floor(Math.random() * 10) + 10;
      var b = Math.floor(Math.random() * 50) + 1;
      //console.log("h: " + h + " w: " + w)
      var elm = document.getElementById("box");
      elm.style.width = w + "em";
      elm.style.height = h + "em";
      elm.style.border = b + "px solid";
    });

   

    </script>
  </body>
</html>
